-- feito por @CriativeGames_oficial do YouTube

local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer

-- CONFIGURA√á√ÉO: COLOQUE O ID DO JOGO PERMITIDO AQUI
local AllowedGameId = 10959918411 -- <=Troque para o ID do jogo

-- VALIDA√á√ÉO DE JOGO
if game.PlaceId ~= AllowedGameId then
LocalPlayer:Kick("O jogo '"..game.Name.."' n√£o √© o Studio Lite. Por favor entre no Studio Lite!!!")
return
end

-- TARGET GUI
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local Target = PlayerGui:FindFirstChild("Your_Gui")
if not Target then
Target = Instance.new("ScreenGui")
Target.Name = "Your_Gui"
Target.Parent = PlayerGui
end

-- CORE GUI INSPECTOR
local CoreGui = game:GetService("CoreGui")
local Inspector = CoreGui:FindFirstChild("InspectorGui")
if Inspector then Inspector:Destroy() end
Inspector = Instance.new("ScreenGui")
Inspector.Name = "InspectorGui"
Inspector.ResetOnSpawn = false
Inspector.Parent = CoreGui

-- FRAME PRINCIPAL
local Frame = Instance.new("Frame")
Frame.Name = "Window"
Frame.Size = UDim2.fromOffset(250,300)
Frame.Position = UDim2.new(0,50,0,80)
Frame.BackgroundColor3 = Color3.fromRGB(28,28,28)
Frame.BorderSizePixel = 0
Frame.Visible = false
Frame.Parent = Inspector
Instance.new("UICorner", Frame).CornerRadius = UDim.new(0,12)

-- BOT√ÉO GB HUB
local BtnGBHub = Instance.new("ImageButton")
BtnGBHub.Size = UDim2.new(0, 50, 0, 45)
BtnGBHub.Position = UDim2.new(0.5, -25, 0, -35)
BtnGBHub.BackgroundColor3 = Color3.fromRGB(60,60,60)
BtnGBHub.Image = "rbxthumb://type=Asset&id=104648175914694&w=420&h=420"
BtnGBHub.Name = "GBHub"
BtnGBHub.Parent = Inspector
Instance.new("UICorner", BtnGBHub)
local strokeGB = Instance.new("UIStroke", BtnGBHub)
strokeGB.Thickness = 2
strokeGB.Color = Color3.fromRGB(90,90,90)

BtnGBHub.MouseButton1Click:Connect(function()
Frame.Visible = not Frame.Visible
if Frame.Visible then
TweenService:Create(Frame,TweenInfo.new(0.3,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),
{Size=UDim2.fromOffset(250,300)}):Play()
end
end)

-- T√çTULO
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1,-140,0,40)
Title.Position = UDim2.new(0,12,0,0)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 20
Title.TextColor3 = Color3.fromRGB(230,230,230)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Text = "GB Hub [GUI > Script]"
Title.Parent = Frame

-- BOT√ÉO COPIAR
local BtnCopy = Instance.new("TextButton")
BtnCopy.Size = UDim2.fromOffset(90,32)
BtnCopy.Position = UDim2.new(0,12,0,44)
BtnCopy.BackgroundColor3 = Color3.fromRGB(40,140,60)
BtnCopy.Text = "Copiar"
BtnCopy.TextColor3 = Color3.new(1,1,1)
BtnCopy.Font = Enum.Font.SourceSansBold
BtnCopy.TextSize = 18
BtnCopy.Parent = Frame
Instance.new("UICorner", BtnCopy)

-- BOT√ÉO FECHAR
local BtnClose = Instance.new("TextButton")
BtnClose.Size = UDim2.fromOffset(40,40)
BtnClose.Position = UDim2.new(1,-46,0,6)
BtnClose.BackgroundColor3 = Color3.fromRGB(200,60,60)
BtnClose.Text = "X"
BtnClose.TextScaled = true
BtnClose.TextColor3 = Color3.new(1,1,1)
BtnClose.Font = Enum.Font.SourceSansBold
BtnClose.Parent = Frame
Instance.new("UICorner", BtnClose)

-- ARRASTAR PELO TOPO
local dragging = false
local dragStartPos
local frameStartPos
Frame.InputBegan:Connect(function(input)
if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
local mousePos = input.Position
if mousePos.Y <= Frame.AbsolutePosition.Y + 60 then
dragging = true
dragStartPos = mousePos
frameStartPos = Frame.Position
end
end
end)
Frame.InputChanged:Connect(function(input)
if dragging and (input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement) then
local delta = input.Position - dragStartPos
local goal = UDim2.new(
frameStartPos.X.Scale, frameStartPos.X.Offset + delta.X,
frameStartPos.Y.Scale, frameStartPos.Y.Offset + delta.Y
)
TweenService:Create(Frame,TweenInfo.new(0.1,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{Position=goal}):Play()
end
end)
Frame.InputEnded:Connect(function(input)
dragging = false
end)

-- CONFIRMA√á√ÉO AO FECHAR
local function createCloseConfirmation()
local ConfirmGui = Instance.new("ScreenGui")
ConfirmGui.Name = "ConfirmCloseGui"
ConfirmGui.ResetOnSpawn = false
ConfirmGui.Parent = CoreGui

local bg = Instance.new("Frame")      
bg.Size = UDim2.new(0,300,0,150)      
bg.Position = UDim2.new(0.5,-150,0.5,-75)      
bg.BackgroundColor3 = Color3.fromRGB(45,45,45)      
bg.Parent = ConfirmGui      
Instance.new("UICorner", bg)      
local stroke = Instance.new("UIStroke", bg)      
stroke.Color = Color3.fromRGB(70,70,70)      

local text = Instance.new("TextLabel")      
text.Size = UDim2.new(1,-20,0,70)      
text.Position = UDim2.new(0,10,0,10)      
text.Text = "Tem certeza que quer mesmo fechar?\nVoc√™ pode perder todo o seu trabalho que voc√™ fez at√© agora."      
text.TextColor3 = Color3.fromRGB(255,255,255)      
text.Font = Enum.Font.SourceSansBold      
text.TextSize = 16      
text.TextWrapped = true      
text.BackgroundTransparency = 1      
text.Parent = bg      

local BtnYes = Instance.new("TextButton")      
BtnYes.Size = UDim2.new(0,120,0,40)      
BtnYes.Position = UDim2.new(0,20,1,-50)      
BtnYes.BackgroundColor3 = Color3.fromRGB(200,60,60)      
BtnYes.Text = "Sim, ok"      
BtnYes.TextColor3 = Color3.fromRGB(255,255,255)      
BtnYes.Font = Enum.Font.SourceSansBold      
BtnYes.TextSize = 16      
BtnYes.Parent = bg      
Instance.new("UICorner", BtnYes)      

local BtnNo = Instance.new("TextButton")      
BtnNo.Size = UDim2.new(0,120,0,40)      
BtnNo.Position = UDim2.new(1,-140,1,-50)      
BtnNo.BackgroundColor3 = Color3.fromRGB(60,200,60)      
BtnNo.Text = "N√£o, obrigado"      
BtnNo.TextColor3 = Color3.fromRGB(255,255,255)      
BtnNo.Font = Enum.Font.SourceSansBold      
BtnNo.TextSize = 16      
BtnNo.Parent = bg      
Instance.new("UICorner", BtnNo)      

BtnNo.MouseButton1Click:Connect(function()      
    ConfirmGui:Destroy()      
end)      

BtnYes.MouseButton1Click:Connect(function()      
    ConfirmGui:Destroy()      
    if Inspector then Inspector:Destroy() end      
    if Target then Target:Destroy() end      
end)

end

BtnClose.MouseButton1Click:Connect(createCloseConfirmation)

-- SCROLLING FRAME
local Scroll = Instance.new("ScrollingFrame")
Scroll.Name = "Scroll"
Scroll.Size = UDim2.new(1,-24,1,-90)
Scroll.Position = UDim2.new(0,12,0,84)
Scroll.BackgroundTransparency = 1
Scroll.ScrollBarThickness = 8
Scroll.CanvasSize = UDim2.new(1,20,0,0)
Scroll.AutomaticCanvasSize = Enum.AutomaticSize.None  -- agora manual
Scroll.Parent = Frame

-- LABEL DE C√ìDIGO
local Code = Instance.new("TextLabel")
Code.Name = "Code"
Code.BackgroundTransparency = 1
Code.TextXAlignment = Enum.TextXAlignment.Left
Code.TextYAlignment = Enum.TextYAlignment.Top
Code.Font = Enum.Font.Code
Code.TextColor3 = Color3.fromRGB(235,235,235)
Code.TextSize = 15
Code.TextWrapped = false
Code.Text = ""
Code.Interactable = false
Code.Size = UDim2.new(1,-8,0,300)
Code.Position = UDim2.new(0,4,0,0)
Code.Parent = Scroll
Code.AutomaticSize = Enum.AutomaticSize.Y

-- ATUALIZA√á√ÉO AUTOM√ÅTICA DO CANVASSIZE (vertical e horizontal)
task.spawn(function()
while task.wait(0.2) do
if Code and Scroll then
local textBoundsY = Code.TextBounds.Y
local textBoundsX = Code.TextBounds.X
local visibleHeight = Scroll.AbsoluteSize.Y
local visibleWidth = Scroll.AbsoluteSize.X
local neededHeight = math.max(textBoundsY + 20, visibleHeight)
local neededWidth = math.max(textBoundsX + 20, visibleWidth) -- <- horizontal autom√°tico
Scroll.CanvasSize = UDim2.new(0, neededWidth, 0, neededHeight)
end
end
end)
-- NOTIFICA√á√ÉO
local function notify(t,msg,dur)
pcall(function()
StarterGui:SetCore("SendNotification",{Title=t or "Aviso", Text=msg or "", Duration=dur or 2})
end)
end

-- =============================
-- PARTE 2 ‚Äî SISTEMA DE GERA√á√ÉO DE C√ìDIGO AUTOM√ÅTICO (CORRIGIDO)
-- Substitua a sua Parte 2 por este bloco
-- =============================

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

local CoreGui = game:GetService("CoreGui")
local Inspector = CoreGui:WaitForChild("InspectorGui")
local Frame = Inspector:WaitForChild("Window")
local Scroll = Frame:WaitForChild("Scroll")
local Code = Scroll:WaitForChild("Code")
local BtnCopy = Frame:FindFirstChildOfClass("TextButton") or Frame:FindFirstChild("Copiar")

-- garantir que UserInputService exista
local UserInputService = game:GetService("UserInputService")

-- modo sele√ß√£o e conex√£o guardada (para evitar erros de nil)
local selecting = false
local selectionConnection = nil

if BtnCopy then
    BtnCopy.MouseButton1Click:Connect(function()
        -- alterna o estado
        selecting = not selecting

        if selecting then
            -- entra em modo sele√ß√£o: oculta o bot√£o e aguarda clique/touch para sair
            BtnCopy.Visible = false

            -- desconecta conex√£o antiga se existir (precau√ß√£o)
            if selectionConnection then
                selectionConnection:Disconnect()
                selectionConnection = nil
            end

            -- conecta para detectar fim da a√ß√£o do usu√°rio (mouse ou touch)
            selectionConnection = UserInputService.InputEnded:Connect(function(input, gameProcessed)
                -- se o usu√°rio clicar/tocar com o bot√£o principal, encerra sele√ß√£o
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    -- sai do modo sele√ß√£o
                    selecting = false

                    -- limpa e desconecta
                    if selectionConnection then
                        selectionConnection:Disconnect()
                        selectionConnection = nil
                    end

                    -- restaura o bot√£o vis√≠vel
                    if BtnCopy and BtnCopy.Parent then
                        BtnCopy.Visible = true
                    end
                end
            end)
        else
            -- saiu manualmente do modo sele√ß√£o: garante desconex√£o e resto
            if selectionConnection then
                selectionConnection:Disconnect()
                selectionConnection = nil
            end
            if BtnCopy and BtnCopy.Parent then
                BtnCopy.Visible = true
            end
        end
    end)
else
    warn("BtnCopy n√£o encontrado ‚Äî verifique o nome/parent do bot√£o antes de colar este trecho.")
end

-- Detecta a GUI de destino (usa a mesma Target do seu script principal)
local Target = PlayerGui:FindFirstChild("Your_Gui")
if not Target then
    Target = Instance.new("ScreenGui")
    Target.Name = "Your_Gui"
    Target.Parent = PlayerGui
end

-- Classes UI que queremos tratar de forma direta (ex.: UICorner)
local UI_CLASSES = {
    UICorner = true, UIStroke = true, UIGradient = true, UIPadding = true,
    UIAspectRatioConstraint = true, UISizeConstraint = true, UIListLayout = true, UIGridLayout = true,
}

-- formatadores
local function formatEnum(v) return tostring(v) end
local function formatUDim(v) return string.format("UDim.new(%s, %s)", tostring(v.Scale), tostring(v.Offset)) end
local function formatUDim2(v) return string.format("UDim2.new(%s, %s, %s, %s)", tostring(v.X.Scale), tostring(v.X.Offset), tostring(v.Y.Scale), tostring(v.Y.Offset)) end
local function formatVector2(v) return string.format("Vector2.new(%s, %s)", tostring(v.X), tostring(v.Y)) end
local function formatVector3(v) return string.format("Vector3.new(%s, %s, %s)", tostring(v.X), tostring(v.Y), tostring(v.Z)) end
local function formatColor3(v) return string.format("Color3.fromRGB(%d, %d, %d)", math.floor(v.R * 255), math.floor(v.G * 255), math.floor(v.B * 255)) end
local function formatRect(v) return string.format("Rect.new(%s, %s, %s, %s)", tostring(v.Min.X), tostring(v.Min.Y), tostring(v.Max.X), tostring(v.Max.Y)) end

local function formatValue(v)
    local t = typeof(v)
    if t == "Color3" then return formatColor3(v)
    elseif t == "UDim2" then return formatUDim2(v)
    elseif t == "UDim" then return formatUDim(v)
    elseif t == "Vector2" then return formatVector2(v)
    elseif t == "Vector3" then return formatVector3(v)
    elseif t == "EnumItem" then return formatEnum(v)
    elseif t == "boolean" or t == "number" then return tostring(v)
    elseif t == "string" then return string.format("%q", v)
    elseif t == "Rect" then return formatRect(v)
    else return nil end
end

local function tryGet(obj, prop)
    local ok, val = pcall(function() return obj[prop] end)
    return ok, val
end

local CORE_PROPS = {
    "Name", "Size", "Position", "BackgroundColor3", "Visible", "ZIndex",
}

local EXTRA_PROPS = {
    "BackgroundTransparency","BorderSizePixel","BorderColor3","AnchorPoint","Rotation",
    "LayoutOrder","ClipsDescendants","AutomaticSize","SizeConstraint",
    "Text","TextColor3","TextSize","Font","TextWrapped","TextScaled",
    "TextXAlignment","TextYAlignment","PlaceholderText","PlaceholderColor3","ClearTextOnFocus",
    "CanvasSize","CanvasPosition","ScrollingEnabled","ScrollBarThickness","AutomaticCanvasSize",
    "Image","ImageColor3","ImageTransparency","ScaleType","SliceCenter","SliceScale","TileSize","ResampleMode",
    "Color","Thickness","Transparency","ApplyStrokeMode","LineJoinMode",
    "CornerRadius","Rotation","Offset",
    "PaddingTop","PaddingBottom","PaddingLeft","PaddingRight",
    "MaxSize","MinSize","MaxTextSize","MinTextSize","AspectRatio","AspectType","DominantAxis",
}

-- nomes seguros (gera identificadores v√°lidos e √∫nicos para vari√°veis)
local usedNames = {}
local function safeVar(base)
    base = tostring(base or "obj")
    -- substitui caracteres inv√°lidos por underscore (mant√©m legibilidade)
    base = base:gsub("%s+", "")
    base = base:gsub("[^%w_]", "")
    if base == "" then base = "obj" end
    if base:match("^[0-9]") then base = "" .. base end
    local name = base
    local i = 1
    while usedNames[name] do
        i = i + 1
        name = base .. i
    end
    usedNames[name] = true
    return name
end

local varOf = {}
local counter = 0

local function emitProps(lines, indent, varName, obj, propList)
    for _, prop in ipairs(propList) do
        local ok, val = tryGet(obj, prop)
        if ok and val ~= nil then
            local formatted = formatValue(val)
            if formatted ~= nil then
                table.insert(lines, string.format("%s%s.%s = %s", indent, varName, prop, formatted))
            end
        end
    end
end

local function emitObject(lines, obj, parentVar, depth)
    depth = depth or 0
    local indent = string.rep("    ", depth)
    counter = counter + 1

    local defaultName = (obj.Name ~= "" and obj.Name) or obj.ClassName
    local varName = varOf[obj] or safeVar(defaultName)
    varOf[obj] = varName

    -- se for uma pequena UI auxiliar (UICorner/etc.) queremos criar diretamente com parent no constructor
    if UI_CLASSES[obj.ClassName] then
        if parentVar then
            table.insert(lines, string.format("%s-- [%d] %s (UI decorator)", indent, counter, obj.Name))
            table.insert(lines, string.format('%slocal %s = Instance.new(%q, %s)', indent, varName, obj.ClassName, parentVar))
        else
            table.insert(lines, string.format("%s-- [%d] %s (UI decorator)", indent, counter, obj.Name))
            table.insert(lines, string.format('%slocal %s = Instance.new(%q)', indent, varName, obj.ClassName))
        end
        -- propriedades extras (como CornerRadius)
        emitProps(lines, indent, varName, obj, EXTRA_PROPS)
        return
    end

    table.insert(lines, string.format("%s-- [%d] %s", indent, counter, obj.Name))
    table.insert(lines, string.format("%slocal %s = Instance.new(%q)", indent, varName, obj.ClassName))

    emitProps(lines, indent, varName, obj, CORE_PROPS)
    emitProps(lines, indent, varName, obj, EXTRA_PROPS)

    if parentVar then
        table.insert(lines, string.format("%s%s.Parent = %s", indent, varName, parentVar))
    end

    for _, child in ipairs(obj:GetChildren()) do
        emitObject(lines, child, varName, depth + 1)
    end
end

local function buildCode()
    usedNames, varOf, counter = {}, {}, 0
    local lines = {}
    local rootVar = safeVar(Target.Name or "Your_Gui")
    varOf[Target] = rootVar


table.insert(lines, "-- Criado Automaticamente Por GB Hub Oficial ")
    table.insert(lines, "local Players = game:GetService(\"Players\")")
    table.insert(lines, "local PlayerGui = Players.LocalPlayer:WaitForChild(\"PlayerGui\")")
    table.insert(lines, string.format("local %s = Instance.new(\"ScreenGui\")", rootVar))
    table.insert(lines, string.format("%s.Name = %q", rootVar, Target.Name))
    table.insert(lines, string.format("%s.ResetOnSpawn = false", rootVar))
    table.insert(lines, string.format("%s.Parent = PlayerGui", rootVar))    

    for _, child in ipairs(Target:GetChildren()) do
        emitObject(lines, child, rootVar, 0)
    end

    return table.concat(lines, "\n")
end

local function refresh()
    local ok, txt = pcall(buildCode)
    if ok then
        Code.Text = txt
    else
        Code.Text = "-- ERRO AO GERAR C√ìDIGO"
    end
end

-- atualiza regularmente (e atualiza tamb√©m quando a Target mudar)
task.spawn(function()
    while true do
        refresh()
        task.wait(0.2)
    end
end)

-- opcional: tamb√©m reagir a eventos para atualiza√ß√£o imediata (mais responsivo)
local function connectTargetListeners(t)
    if not t then return end
    -- desconecta / reconecta para evitar duplicados
    pcall(function()
        t:GetPropertyChangedSignal("Name"):Connect(refresh)
        t.DescendantAdded:Connect(refresh)
        t.DescendantRemoving:Connect(refresh)
        t.ChildAdded:Connect(refresh)
        t.ChildRemoved:Connect(refresh)
    end)
end
connectTargetListeners(Target)
-- copiar para clipboard (corrigido para copiar TODO o c√≥digo gerado real)
if BtnCopy then
    BtnCopy.MouseButton1Click:Connect(function()
        local fullCode = buildCode() -- gera novamente o texto completo, sem depender do que aparece no Code

        local ok = false
        if typeof(setclipboard) == "function" then
            pcall(function() setclipboard(fullCode) end)
            ok = true
        end

        local StarterGui = game:GetService("StarterGui")
        if ok then
            pcall(function()
                StarterGui:SetCore("SendNotification", {
                    Title = "Copiado com sucesso",
                    Text = "O c√≥digo completo foi copiado para a √°rea de transfer√™ncia!",
                    Duration = 5
                })
            end)
        else
            pcall(function()
                StarterGui:SetCore("SendNotification", {
                    Title = "Aviso",
                    Text = "N√£o foi poss√≠vel copiar automaticamente neste ambiente.",
                    Duration = 5
                })
            end)
        end
    end)
end

-- Coloque este script dentro de: CoreGui.InspectorGui.Window
-- Nome sugerido: UniversalSelectDrag

local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")
local TouchGui = PlayerGui:FindFirstChild("TouchGui")

-- ====================
-- CONFIGURA√á√ïES DO REMOTE
-- ====================
-- Troque este nome de pasta se voc√™ j√° tiver uma pasta espec√≠fica em ReplicatedStorage
local REMOTE_FOLDER_NAME = "StudioLiteFolder"      -- <--- ajuste aqui se quiser
local REMOTE_EVENT_NAME = "PVP?" -- nome do RemoteEvent

-- Garante que exista a pasta e o RemoteEvent em ReplicatedStorage
local function ensureRemote()
    local folder = ReplicatedStorage:FindFirstChild(REMOTE_FOLDER_NAME)
    if not folder then
        folder = Instance.new("Folder")
        folder.Name = REMOTE_FOLDER_NAME
        folder.Parent = ReplicatedStorage
    end

    local remote = folder:FindFirstChild(REMOTE_EVENT_NAME)
    if not remote then
        remote = Instance.new("RemoteEvent")
        remote.Name = REMOTE_EVENT_NAME
        remote.Parent = folder
    end

    return folder, remote
end

local remoteFolder, selectionRemote = ensureRemote()

-- Fun√ß√£o segura para disparar evento ao servidor (pode falhar em ambientes sem servidor autorizado)
local function fireSelectionRemote(state)
    -- pcall para evitar erros se FireServer n√£o estiver permitido no ambiente
    pcall(function()
        if selectionRemote and selectionRemote.FireServer then
            selectionRemote:FireServer(state)
        end
    end)
end

-- ====================
-- CONFIGURA√á√ïES DO INSPECTOR
-- ====================
local InspectorGui = CoreGui:WaitForChild("InspectorGui")
local Window = InspectorGui:WaitForChild("Window")
local HIGH_ZINDEX = 9999

local selectedObject = nil
local dragButton = nil
local dragging = false
local dragStart = nil
local startPos = nil
local resizeButtons = {}

-- ====================
-- BOT√ÉO PRINCIPAL DE SELE√á√ÉO (interface existente)
-- ====================
local selectButton = Instance.new("TextButton")
selectButton.Name = "SelectButton"
selectButton.Parent = Window
selectButton.Size = UDim2.new(0,90,0,32)
selectButton.Position = UDim2.new(0,105,0,44)
selectButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
selectButton.Text = "Selecione Um"
selectButton.TextScaled = true
selectButton.Font = Enum.Font.GothamBold
selectButton.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", selectButton).CornerRadius = UDim.new(0,8)

-- ====================
-- Atualiza visibilidade do bot√£o localmente (uso interno)
-- ====================
local function updateLocalSelectButtonVisibility()
    if selectedObject ~= nil then
        -- esconde enquanto algo estiver selecionado
        if selectButton then
            BtnCopy.Visible = false
        end
    else
        if selectButton then
            BtnCopy.Visible = true
        end
    end
end

-- (Opcional) se quiser for√ßar atualiza√ß√£o constante por seguran√ßa:
RunService.Heartbeat:Connect(function()
    updateLocalSelectButtonVisibility()
end)

-- ====================
-- FUN√á√ÉO DE VALIDA√á√ÉO
-- ====================
local function isValidObject(obj)
    if not obj:IsA("GuiObject") then return false end
    if obj:IsDescendantOf(InspectorGui) then return false end
    if obj:IsDescendantOf(PlayerGui:FindFirstChild("StudioGui") or {}) then return false end
    if obj:IsDescendantOf(CoreGui) and not obj:IsDescendantOf(InspectorGui) then return false end
    if TouchGui and obj:IsDescendantOf(TouchGui) then return false end
    if obj.Name == "DragButton" then return false end
    return true
end

-- ====================
-- DESTRUIR DragButtons DENTRO DE EXPLORERPANEL (mantido)
-- ====================
local function destroyDragButtons()
    local studioGui = PlayerGui:FindFirstChild("StudioGui")
    if not studioGui then return end
    local explorerPanel = studioGui:FindFirstChild("ExplorerPanel")
    if not explorerPanel then return end

    for _, obj in ipairs(explorerPanel:GetDescendants()) do
        if (obj:IsA("TextButton") or obj:IsA("ImageButton")) and (obj.Name == "DragButton" or (obj:IsA("TextButton") and obj.Text == "DragButton")) then
            obj.Visible = false
            obj:Destroy()
        end
    end
end
destroyDragButtons()

if PlayerGui:FindFirstChild("StudioGui") and PlayerGui.StudioGui:FindFirstChild("ExplorerPanel") then
    PlayerGui.StudioGui.ExplorerPanel.DescendantAdded:Connect(function(obj)
        if (obj:IsA("TextButton") or obj:IsA("ImageButton")) and (obj.Name == "DragButton" or (obj:IsA("TextButton") and obj.Text == "DragButton")) then
            obj.Visible = false
            obj:Destroy()
        end
    end)
end

-- ====================
-- CRIAR DragButton (mantido)
-- ====================
local function createDragButton(gui)
    if dragButton then dragButton:Destroy() end
    dragButton = Instance.new("TextButton")
    dragButton.Name = "Ignore Esse Bot√£o"
    dragButton.BackgroundTransparency = 1
    dragButton.BorderSizePixel = 0
    dragButton.Text = ""
    dragButton.Size = UDim2.new(1,0,1,0)
    dragButton.Position = UDim2.new(0,0,0,0)
    dragButton.ZIndex = HIGH_ZINDEX
    dragButton.Active = true
    dragButton.Parent = gui

    dragButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = Vector2.new(input.Position.X, input.Position.Y)
            startPos = gui.Position
        end
    end)
end

-- ====================
-- CRIAR BOT√ïES DE REDIMENSIONAMENTO (mantido)
-- ====================
local function createResizeButtons(parent)
    for _, btn in ipairs(resizeButtons) do btn:Destroy() end
    resizeButtons = {}

    local positions = {
        {"TopLeft"}, {"TopRight"}, {"BottomLeft"}, {"BottomRight"},
        {"TopMiddle"}, {"BottomMiddle"}, {"MiddleLeft"}, {"MiddleRight"}
    }

    for _, pos in ipairs(positions) do
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(0,10,0,10)
        btn.BackgroundColor3 = Color3.new(1,1,1)
        btn.BorderSizePixel = 0
        btn.Text = ""
        btn.ZIndex = HIGH_ZINDEX + 1
        btn.Parent = parent

        local resizing = false
        local startSize = nil
        local startPosMouse = nil

        btn.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                resizing = true
                startSize = parent.Size
                startPosMouse = Vector2.new(input.Position.X, input.Position.Y)
            end
        end)
        btn.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                resizing = false
            end
        end)

        UserInputService.InputChanged:Connect(function(input)
            if resizing and input.UserInputType == Enum.UserInputType.MouseMovement then
                local delta = Vector2.new(input.Position.X, input.Position.Y) - startPosMouse
                local newSize = startSize

                if pos[1] == "TopLeft" then
                    newSize = UDim2.new(startSize.X.Scale, startSize.X.Offset - delta.X, startSize.Y.Scale, startSize.Y.Offset - delta.Y)
                elseif pos[1] == "TopRight" then
                    newSize = UDim2.new(startSize.X.Scale, startSize.X.Offset + delta.X, startSize.Y.Scale, startSize.Y.Offset - delta.Y)
                elseif pos[1] == "BottomLeft" then
                    newSize = UDim2.new(startSize.X.Scale, startSize.X.Offset - delta.X, startSize.Y.Scale, startSize.Y.Offset + delta.Y)
                elseif pos[1] == "BottomRight" then
                    newSize = UDim2.new(startSize.X.Scale, startSize.X.Offset + delta.X, startSize.Y.Scale, startSize.Y.Offset + delta.Y)
                elseif pos[1] == "TopMiddle" then
                    newSize = UDim2.new(startSize.X.Scale, startSize.X.Offset, startSize.Y.Scale, startSize.Y.Offset - delta.Y)
                elseif pos[1] == "BottomMiddle" then
                    newSize = UDim2.new(startSize.X.Scale, startSize.X.Offset, startSize.Y.Scale, startSize.Y.Offset + delta.Y)
                elseif pos[1] == "MiddleLeft" then
                    newSize = UDim2.new(startSize.X.Scale, startSize.X.Offset - delta.X, startSize.Y.Scale, startSize.Y.Offset)
                elseif pos[1] == "MiddleRight" then
                    newSize = UDim2.new(startSize.X.Scale, startSize.X.Offset + delta.X, startSize.Y.Scale, startSize.Y.Offset)
                end
                parent.Size = newSize
            end
        end)

        table.insert(resizeButtons, btn)
    end
end

-- ====================
-- ATUALIZA POSI√á√ÉO DOS BOT√ïES
-- ====================
RunService.RenderStepped:Connect(function()
    if dragButton then
        for i, btn in ipairs(resizeButtons) do
            if i == 1 then btn.Position = UDim2.new(0,0,0,0) end
            if i == 2 then btn.Position = UDim2.new(1,-btn.AbsoluteSize.X,0,0) end
            if i == 3 then btn.Position = UDim2.new(0,0,1,-btn.AbsoluteSize.Y) end
            if i == 4 then btn.Position = UDim2.new(1,-btn.AbsoluteSize.X,1,-btn.AbsoluteSize.Y) end
            if i == 5 then btn.Position = UDim2.new(0.5,-btn.AbsoluteSize.X/2,0,0) end
            if i == 6 then btn.Position = UDim2.new(0.5,-btn.AbsoluteSize.X/2,1,-btn.AbsoluteSize.Y) end
            if i == 7 then btn.Position = UDim2.new(0,0,0.5,-btn.AbsoluteSize.Y/2) end
            if i == 8 then btn.Position = UDim2.new(1,-btn.AbsoluteSize.X,0.5,-btn.AbsoluteSize.Y/2) end
        end
    end
end)

-- ====================
-- SELE√á√ÉO DE OBJETO (centraliza a l√≥gica para mandar o remote e atualizar local)
-- ====================
local function onSelectedObjectChanged(newObj)
    selectedObject = newObj

    -- atualiza√ß√£o local imediata do bot√£o
    updateLocalSelectButtonVisibility()

    -- avisa o servidor via RemoteEvent (true se selecionado, false se nil)
    local state = (selectedObject ~= nil)
    -- usamos pcall para evitar erros caso FireServer esteja bloqueado
    fireSelectionRemote(state)
end

local function selectGui(gui)
    onSelectedObjectChanged(gui)
    if gui then
        selectButton.Text = "Selecionado: "..gui.Name.."  Deselecionar üí†"
        createDragButton(gui)
        createResizeButtons(dragButton)
    end
end

-- ====================
-- ARRASTO
-- ====================
UserInputService.InputChanged:Connect(function(input)
    if dragging and dragButton and selectedObject then
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            local posVec = Vector2.new(input.Position.X, input.Position.Y)
            local delta = posVec - dragStart
            selectedObject.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

-- ====================
-- CRIAR LISTA DE SELE√á√ÉO
-- ====================
local function createSelectionList()
    if Window:FindFirstChild("SelectionList") then
        Window.SelectionList:Destroy()
    end

    local listFrame = Instance.new("ScrollingFrame")
    listFrame.Name = "SelectionList"
    listFrame.Parent = Window
    listFrame.Position = UDim2.new(0, 0, 0, 0)
    listFrame.Size = UDim2.new(0, 250, 0, 300)
    listFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    listFrame.BorderSizePixel = 0
    listFrame.ClipsDescendants = true

    local listLayout = Instance.new("UIListLayout")
    listLayout.Padding = UDim.new(0, 2)
    listLayout.Parent = listFrame

    Instance.new("UICorner", listFrame).CornerRadius = UDim.new(0, 8)

    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0,50,0,30)
    closeBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
    closeBtn.BorderSizePixel = 0
    closeBtn.Text = "X"
    closeBtn.TextColor3 = Color3.new(1,1,1)
    closeBtn.TextScaled = true
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.Parent = listFrame
    Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0, 8)
    closeBtn.MouseButton1Click:Connect(function()
        listFrame:Destroy()
    end)

    -- Adicionar objetos v√°lidos
    local function createObjectButton(gui)
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1,0,0,25)
        btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
        btn.BorderSizePixel = 0
        btn.TextScaled = true
        btn.Font = Enum.Font.Gotham
        btn.TextColor3 = Color3.new(1,1,1)
        btn.Text = gui.Name.." | "..gui.ClassName
        btn.Parent = listFrame

        btn.MouseButton1Click:Connect(function()
            selectGui(gui)
            listFrame:Destroy()
        end)
    end

    for _, gui in ipairs(CoreGui:GetDescendants()) do
        if isValidObject(gui) then
            createObjectButton(gui)
        end
    end
    for _, gui in ipairs(PlayerGui:GetDescendants()) do
        if isValidObject(gui) then
            createObjectButton(gui)
        end
    end
end

-- ====================
-- BOT√ÉO PRINCIPAL (clicar abre lista / deseleciona)
-- ====================
selectButton.MouseButton1Click:Connect(function()
    if selectedObject then
        -- desseselect
        if dragButton then
            dragButton:Destroy()
            dragButton = nil
        end
        onSelectedObjectChanged(nil) -- atualiza estado (local + remote)
        selectButton.Text = "Selecione Um"
        createSelectionList()
    else
        createSelectionList()
    end
end)
-- Fim do script

print("N√£o Clique No Bot√£o Play BLZ")
-- Coloque dentro de: StarterPlayerScripts (LocalScript)
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer

-- TARGET GUI (InspectorGui j√° existente)
local CoreGui = game:GetService("CoreGui")
local Inspector = CoreGui:WaitForChild("InspectorGui")
local BtnGBHub -- <- Coloque aqui o bot√£o GB Hub que ser√° revelado no final
BtnGBHub = Inspector:WaitForChild("GBHub") 

BtnGBHub.Visible = false -- garante que o bot√£o come√ßa invis√≠vel

-- CRIA√á√ÉO DA TELA DE CARREGAMENTO
local LoadingGui = Instance.new("ScreenGui")
LoadingGui.Name = "LoadingGui"
LoadingGui.ResetOnSpawn = false
LoadingGui.Parent = Inspector

-- Fundo escuro
local bg = Instance.new("Frame")
bg.Size = UDim2.new(1,0,1,0)
bg.Position = UDim2.new(0,0,0,0)
bg.BackgroundColor3 = Color3.fromRGB(20,20,20)
bg.BorderSizePixel = 0
bg.Parent = LoadingGui

-- T√≠tulo
local title = Instance.new("TextLabel")
title.Size = UDim2.new(0,400,0,40)
title.Position = UDim2.new(0.5,-200,0.35,-10)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextSize = 32
title.TextColor3 = Color3.fromRGB(235,235,235)
title.Text = "GB Hub [UPDATE 2]"
title.TextScaled = true
title.TextXAlignment = Enum.TextXAlignment.Center
title.TextYAlignment = Enum.TextYAlignment.Center
title.Parent = bg

-- Subt√≠tulo
local subtitle = Instance.new("TextLabel")
subtitle.Size = UDim2.new(0,400,0,24)
subtitle.Position = UDim2.new(0.5,-200,0.41,0)
subtitle.BackgroundTransparency = 1
subtitle.Font = Enum.Font.Gotham
subtitle.TextSize = 18
subtitle.TextColor3 = Color3.fromRGB(180,180,180)
subtitle.Text = "For Studio Lite Oficial"
subtitle.TextScaled = true
subtitle.TextXAlignment = Enum.TextXAlignment.Center
subtitle.TextYAlignment = Enum.TextYAlignment.Center
subtitle.Parent = bg

-- Barra de progresso (fina, arredondada)
local barBg = Instance.new("Frame")
barBg.Size = UDim2.new(0.5,0,0,16)
barBg.Position = UDim2.new(0.5,-250,0.5, 0)
barBg.BackgroundColor3 = Color3.fromRGB(60,60,60)
barBg.BorderSizePixel = 0
barBg.Parent = bg
Instance.new("UICorner", barBg).CornerRadius = UDim.new(0,8)

local barFill = Instance.new("Frame")
barFill.Size = UDim2.new(0,0,1,0)
barFill.Position = UDim2.new(0,0,0,0)
barFill.BackgroundColor3 = Color3.fromRGB(100,200,255)
barFill.BorderSizePixel = 0
barFill.Parent = barBg
Instance.new("UICorner", barFill).CornerRadius = UDim.new(0,8)

-- Texto de carregamento
local loadingText = Instance.new("TextLabel")
loadingText.Size = UDim2.new(0,400,0,24)
loadingText.Position = UDim2.new(0.5,-200,0.55,0)
loadingText.BackgroundTransparency = 1
loadingText.Font = Enum.Font.Gotham
loadingText.TextSize = 18
loadingText.TextColor3 = Color3.fromRGB(220,220,220)
loadingText.TextXAlignment = Enum.TextXAlignment.Center
loadingText.TextYAlignment = Enum.TextYAlignment.Center
loadingText.Text = "Carregando: ..."
loadingText.Parent = bg

-- PALAVRAS DE CARREGAMENTO
local steps = {"APIs üîë", "Estruturas üß±", "Systems üë®‚Äçüíª", "Bot√µes üî≥", "c√≥digo üì†", "Guis üìÅ", "UIs üü¶", "Drag ‚òùÔ∏è", "Modules üöÄ", "Add +"}

-- ANIMA√á√ÉO DO PROGRESSO
task.spawn(function()
	local total = #steps
	for i, word in ipairs(steps) do
		loadingText.Text = "Carregando: "..word
		local goalSize = UDim2.new(i/total,0,1,0)
		TweenService:Create(barFill, TweenInfo.new(2 / (i/2), Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size=goalSize}):Play()
		task.wait(2 / (i/2)) -- velocidade aumenta no final
	end

	-- FINALIZA√á√ÉO
	task.wait(3)
	LoadingGui:Destroy()
	if BtnGBHub then
		BtnGBHub.Visible = true
	end
end)
-- Refer√™ncia ao c√≥digo de coloriza√ß√£o (voc√™ pode integrar isso no seu sistema)
local function colorizeText(text)
    -- Palavras-chave e cores
    local keywords = {
        ["and"]=Color3.fromRGB(173,216,230), ["break"]=Color3.fromRGB(173,216,230),
        ["do"]=Color3.fromRGB(173,216,230), ["else"]=Color3.fromRGB(173,216,230),
        ["elseif"]=Color3.fromRGB(173,216,230), ["end"]=Color3.fromRGB(173,216,230),
        ["false"]=Color3.fromRGB(173,216,230), ["for"]=Color3.fromRGB(173,216,230),
        ["function"]=Color3.fromRGB(173,216,230), ["if"]=Color3.fromRGB(173,216,230),
        ["in"]=Color3.fromRGB(173,216,230), ["local"]=Color3.fromRGB(135,206,250),
        ["nil"]=Color3.fromRGB(173,216,230), ["not"]=Color3.fromRGB(173,216,230),
        ["or"]=Color3.fromRGB(173,216,230), ["repeat"]=Color3.fromRGB(173,216,230),
        ["return"]=Color3.fromRGB(173,216,230), ["then"]=Color3.fromRGB(173,216,230),
        ["true"]=Color3.fromRGB(173,216,230), ["until"]=Color3.fromRGB(173,216,230),
        ["while"]=Color3.fromRGB(173,216,230),
        ["game"]=Color3.fromRGB(216,191,216), ["workspace"]=Color3.fromRGB(216,191,216),
        ["Players"]=Color3.fromRGB(216,191,216), ["Instance"]=Color3.fromRGB(216,191,216),
        ["print"]=Color3.fromRGB(216,191,216),
    }

    local commentColor = Color3.fromRGB(144,238,144)
    local stringColor  = Color3.fromRGB(255,255,102)
    local numberColor  = Color3.fromRGB(255,165,79)

    -- Fun√ß√£o para converter Color3 para hexadecimal (#RRGGBB)
    local function toHex(color)
        return string.format("#%02X%02X%02X", color.R*255, color.G*255, color.B*255)
    end

    -- Processa o texto e aplica a coloriza√ß√£o
    local lines = {}
    for line in text:gmatch("[^\r\n]*") do
        table.insert(lines, line)
    end

    local result = ""
    for _, line in ipairs(lines) do
        local processed = line

        -- Coment√°rios
        processed = processed:gsub("(%-%-.*)", function(c) return "<font color=\""..toHex(commentColor).."\">" .. c .. "</font>" end)
        -- Strings
        processed = processed:gsub("([\"'].-[\"'])", function(s) return "<font color=\""..toHex(stringColor).."\">"..s.."</font>" end)
        -- N√∫meros
        processed = processed:gsub("(%f[%d]%.?%d+)", function(n) return "<font color=\""..toHex(numberColor).."\">"..n.."</font>" end)
        -- Palavras-chave
        for w,c in pairs(keywords) do
            local hex = toHex(c)
            processed = processed:gsub("(%f[%w])"..w.."(%f[%W])", function(a,b) return "<font color=\""..hex.."\">"..w.."</font>" end)
        end

        result = result..processed.."\n"
    end

    return result
end

-- Funciona diretamente no seu c√≥digo
local function colorizeCode()
    local text = Code.Text -- Pegando o texto do campo Code
    local coloredText = colorizeText(text) -- Coloriza o texto
    Code.RichText = true
    Code.Text = coloredText -- Atualiza o texto colorido no Code
end

-- Atualiza√ß√£o otimizada
local lastText = Code.Text
Code:GetPropertyChangedSignal("Text"):Connect(function()
    if Code.Text ~= lastText then
        lastText = Code.Text
        task.spawn(colorizeCode) -- Aplique a coloriza√ß√£o de maneira ass√≠ncrona
    end
end)
